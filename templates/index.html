<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>線性回歸結果</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">線性回歸結果</h1>
        <div class="row">
            <div class="col-md-4">
                <form method="post" class="mb-4 p-3 border rounded" id="controlForm">
                    <h4 class="mb-3">參數設定</h4>
                    <div class="mb-3">
                        <label for="a" class="form-label">係數 a: <span id="a_value">{{ original_a }}</span></label>
                        <input type="range" min="-10" max="10" step="0.1" id="a" name="a" class="form-range" value="{{ original_a }}">
                    </div>
                    <div class="mb-3">
                        <label for="num_points" class="form-label">點的數量: <span id="num_points_value">{{ num_points }}</span></label>
                        <input type="range" min="100" max="1000" step="10" id="num_points" name="num_points" class="form-range" value="{{ num_points }}">
                    </div>
                    <div class="mb-3">
                        <label for="noise_variance" class="form-label">雜訊方差: <span id="noise_variance_value">{{ noise_variance }}</span></label>
                        <input type="range" min="0" max="1000" step="1" id="noise_variance" name="noise_variance" class="form-range" value="{{ noise_variance }}">
                    </div>
                </form>
            </div>
            <div class="col-md-8">
                <div class="card p-3 mb-4">
                    <h4 class="mb-3">結果摘要</h4>
                    <p>隨機產生 <strong>{{ num_points }}</strong> 個點</p>
                    <p>原始 a: <strong>{{ original_a }}</strong>, 原始 b: <strong>{{ original_b }}</strong></p>
                    <p>預測 a: <strong>{{ predicted_a }}</strong>, 預測 b: <strong>{{ predicted_b }}</strong></p>
                    <p>雜訊方差: <strong>{{ noise_variance }}</strong></p>
                </div>
                <img src="{{ url_for('static', filename='plot.png') }}" alt="線性回歸結果" class="img-fluid">
                <br>
                <a href="/" class="btn btn-secondary mt-3">重新整理</a>
            </div>
        </div>
    </div>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sliders = document.querySelectorAll('input[type="range"]');
            const form = document.getElementById('controlForm');

            sliders.forEach(slider => {
                const output = document.getElementById(slider.id + '_value');
                output.textContent = slider.value;
                slider.oninput = function() {
                    output.textContent = this.value;
                    form.submit(); // Submit the form when slider value changes
                };
            });
        });
    </script>
</body>
</html>